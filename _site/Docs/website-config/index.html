<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>网站配置</title>
    <link rel="icon" href="/assets/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tufte-css/1.8.0/tufte.min.css">
    <link rel="stylesheet" href="/assets/tufted.css">
    <link rel="stylesheet" href="/assets/theme.css">
    <link rel="stylesheet" href="/assets/custom.css">
    <script src="/assets/code-blocks.js">
    </script>
    <script src="/assets/format-headings.js">
    </script>
    <script src="/assets/theme-toggle.js">
    </script>
  </head>
  <body>
    <header class="site-header">你好<br>Ciallo～(∠・ω&lt; )⌒☆</header>
    <header>
      <nav><a href="/">Home</a><a href="/Docs/">Docs</a><a href="/Blog/">Blog</a><a href="/CV/">CV</a><a href="/Changelog/">Changelog</a></nav>
    </header>
    <article>
      <section>
        <h2>网站结构</h2>
        <p>模板主要由 5 个部分组成：</p>
        <ul>
          <li><code>config.typ</code> - 核心布局配置文件</li>
          <li><code>content/</code> - 存储所有网页内容</li>
          <li><code>assets/</code> - 存储共享的资源，例如全局 CSS、JS 脚本、图标等</li>
          <li><code>tufted-lib/</code> - Typst 样式库和功能模块</li>
          <li><code>build.py</code> / <code>Makefile</code> - 用于构建网站的脚本</li>
        </ul>
        <h3>可用函数</h3>
        <p><code>tufted</code> 包目前提供了以下三个函数：</p>
        <ul>
          <li><code>tufted-web</code> - 主模板，用于创建网页</li>
          <li><code>margin-note</code> - 在边栏中放置内容（侧边注）</li>
          <li><code>full-width</code> - 将内容放在全宽容器中</li>
        </ul>
        <p>具体使用见 <a href="../typst-example/">Typst 功能速览与样例</a>。</p>
        <h3>主要配置</h3>
        <p>在 <code>config.typ</code> 中，你可以通过自定义从本地 <code>tufted-lib</code> 导入的 <code>tufted-web</code> 模板来定义自己的模板。项目已将 <code>tufted</code> 包的源代码集成到 <code>tufted-lib/</code> 目录中，无需从外部导入。</p>
        <h4>基础配置示例</h4>
        <pre><code data-lang="typst"><span style="color: #d73948">#</span><span style="color: #d73948">import</span> <span style="color: #198810">"tufted-lib/tufted.typ"</span><br><br><span style="color: #d73948">#</span><span style="color: #d73948">let</span> template <span style="color: #d73948">=</span> tufted.tufted-web.<span style="color: #4b69c6">with</span>(<br>  <span style="color: #74747c">// 顶部导航栏的链接和标签</span><br>  header-links: (<br>    <span style="color: #198810">"/"</span>: <span style="color: #198810">"首页"</span>,<br>    <span style="color: #198810">"/Blog/"</span>: <span style="color: #198810">"博客"</span>,<br>    <span style="color: #198810">"/CV/"</span>: <span style="color: #198810">"简历"</span>,<br>    <span style="color: #198810">"/Docs/"</span>: <span style="color: #198810">"文档"</span>,<br>  ),<br>  <span style="color: #74747c">// 网站标题（显示在浏览器标签页）</span><br>  title: <span style="color: #198810">"我的个人网站"</span>,<br>  <span style="color: #74747c">// 语言设置</span><br>  lang: <span style="color: #198810">"zh"</span>,<br>)</code></pre>
        <h4>自定义 Header 和 Footer</h4>
        <p>你还可以自定义页面顶部的 header 元素和底部的 footer 元素：</p>
        <pre><code data-lang="typst"><span style="color: #d73948">#</span><span style="color: #d73948">let</span> template <span style="color: #d73948">=</span> tufted.tufted-web.<span style="color: #4b69c6">with</span>(<br>  header-links: (<br>    <span style="color: #198810">"/"</span>: <span style="color: #198810">"首页"</span>,<br>    <span style="color: #198810">"/Blog/"</span>: <span style="color: #198810">"博客"</span>,<br>  ),<br>  title: <span style="color: #198810">"我的网站"</span>,<br><br>  <span style="color: #74747c">// 自定义 header 元素（显示在导航栏上方）</span><br>  header-elements: (<br>    [你好 Ciallo～(∠・ω&lt; )⌒☆],<br>    [欢迎访问我的博客],<br>  ),<br><br>  <span style="color: #74747c">// 自定义 footer 元素（显示在页面底部）</span><br>  footer-elements: (<br>    [© 2026 我的名字. 保留所有权利。],<br>    [<span style="color: #4b69c6">#</span><span style="color: #4b69c6">link</span>(<span style="color: #198810">"mailto:example@example.com"</span>)[联系我]],<br>  ),<br>)</code></pre>
        <p><code>header-elements</code> 和 <code>footer-elements</code> 都接受数组，每个元素之间会自动添加换行。</p>
        <h4>自定义样式</h4>
        <p>项目提供了两个 CSS 文件：</p>
        <ul>
          <li><code>assets/tufted.css</code> - 主样式表，包含所有默认样式（排版、代码块、表格、深色模式等）</li>
          <li><code>assets/custom.css</code> - 自定义样式表，默认为空，供用户添加个性化样式</li>
        </ul>
        <p>如果你想自定义网站样式，只需编辑 <code>assets/custom.css</code> 文件，添加你自己的 CSS 规则即可。例如：</p>
        <pre><code data-lang="css"><span style="color: #74747c">/*</span><span style="color: #74747c"> 修改主色调 </span><span style="color: #74747c">*/</span><br><span style="color: #8b41b1">:</span><span style="color: #8b41b1">root</span> {<br>  <span style="color: #4b69c6">--</span><span style="color: #4b69c6">primary-color</span>: <span style="color: #b60157">#</span><span style="color: #b60157">0066cc</span>;<br>}<br><br><span style="color: #74747c">/*</span><span style="color: #74747c"> 自定义标题样式 </span><span style="color: #74747c">*/</span><br><span style="color: #4b69c6">h1</span> {<br>  <span style="color: #4b69c6">color</span>: <span style="color: #4b69c6">var</span>(<span style="color: #4b69c6">--</span><span style="color: #4b69c6">primary-color</span>);<br>  <span style="color: #4b69c6">border-bottom</span>: <span style="color: #b60157">2</span><span style="color: #d73948">px</span> <span style="color: #4b69c6">solid</span> <span style="color: #4b69c6">var</span>(<span style="color: #4b69c6">--</span><span style="color: #4b69c6">primary-color</span>);<br>}</code></pre>
        <p>具体可参考 <a href="../custom-styling/">自定义样式</a>。</p>
        <h4>自定义 JavaScript 脚本</h4>
        <p>项目内置了几个实用的 JavaScript 脚本，位于 <code>assets/</code> 目录中：</p>
        <ul>
          <li><code>code-blocks.js</code> - 为代码块添加行号和复制按钮</li>
          <li><code>format-headings.js</code> - 优化标题格式</li>
        </ul>
        <p>这些脚本已在 <code>tufted-lib/tufted.typ</code> 中通过 <code>js-scripts</code> 参数自动加载。 如果你想添加自己的 JavaScript 脚本，有以下两种方式：</p>
        <p><strong>方法 1：在 <code>config.typ</code> 中添加脚本</strong></p>
        <p>在 <code>config.typ</code> 中扩展 <code>tufted-web</code> 配置，添加你的脚本路径到 <code>js-scripts</code> 参数：</p>
        <pre><code data-lang="typst"><span style="color: #d73948">#</span><span style="color: #d73948">let</span> template <span style="color: #d73948">=</span> tufted.tufted-web.<span style="color: #4b69c6">with</span>(<br>  header-links: ( <span style="color: #74747c">/* ... */</span> ),<br>  title: <span style="color: #198810">"我的网站"</span>,<br><br>  <span style="color: #74747c">// 添加自定义脚本</span><br>  js-scripts: (<br>    <span style="color: #198810">"/assets/code-blocks.js"</span>,<br>    <span style="color: #198810">"/assets/format-headings.js"</span>,<br>    <span style="color: #198810">"/assets/my-custom-script.js"</span>,  <span style="color: #74747c">// 你的自定义脚本</span><br>  ),<br>)</code></pre>
        <p><strong>方法 2：直接在文档中嵌入脚本</strong></p>
        <p>使用 <code>#html.script()</code> 函数直接在任何页面中嵌入 JavaScript 代码：</p>
        <pre><code data-lang="typ"><span style="color: #8b41b1">#</span><span style="color: #8b41b1">html</span>.<span style="color: #4b69c6">script</span>(<br>  defer: <span style="color: #d73948">true</span>,<br>  src: <span style="color: #198810">"https://static.cloudflareinsights.com/beacon.min.js"</span>,<br>  "data-cf-beacon": <span style="color: #198810">"{\"token\": \"my-token\"}"</span>,<br>)</code></pre>
        <p>函数具体用法可参考 <a href="https://typst.app/docs/reference/html/typed/#functions-script">官方文档</a>。</p>
        <h3>层级结构与继承</h3>
        <p>网站遵循层级结构。根目录从 <code>../config.typ</code> 导入，而子页面从其父目录的 <code>../index.typ</code> 文件导入，这样就能实现继承关系，无需从项目根路径导入。</p>
        <p><code>content/</code> 目录中所有的 <code>**/index.typ</code> 文件都会成为可访问的页面，其路径对应文件夹的路径（例如 <code>content/Blog/index.typ</code> → <code>example.github.io/Blog</code>）。使用 <code>#link("相对/路径/")[点击我]</code> 来链接到其他页面或目录中其他文件，详细链接用法可参见 <a href="../typst-example/">Typst 功能速览与样例</a>。</p>
        <p>你可以在任何层级修改定义，子页面都会继承这些更改。例如，要改变页面标题，可以从父级导入定义并修改 <code>template</code>：</p>
        <pre><code data-lang="typst"><span style="color: #d73948">#</span><span style="color: #d73948">import</span> <span style="color: #198810">"../index.typ"</span>: template, tufted<br><span style="color: #74747c">// 该页面及其所有子页面都将在浏览器标签中显示为 "新标题"</span><br><span style="color: #d73948">#</span><span style="color: #d73948">show</span>: template.<span style="color: #4b69c6">with</span>(title: <span style="color: #198810">"新标题"</span>)</code></pre>
      </section>
    </article>
    <footer>© 2026 Yousa-Mirage<br>Powered by <a href="https://github.com/Yousa-Mirage/Tufted-Blog-Template">Tufted-Blog-Template</a></footer>
  </body>
</html>
